# made using the contents of diffcal-calib.yaml
/**:
  ros__parameters:

    sensors:
      imu:
        topic:       "/alphasense_driver_ros/imu"

        rate: 400.
        timeshift: 0.
        accelerometer_noise_sigma:            0.001693366453401134
        accelerometer_bias_random_walk_sigma: 0.0002281876683640465
        gyroscope_noise_sigma:                0.00036788529273635174
        gyroscope_bias_random_walk_sigma:     3.982626125401514e-06
        W_g: [0., 0., -9.808083883386614]

      lidar:
        # hesai_base and base are co-located. pandar is above base
        # base:       +x direction forwards. +z up
        # hesai_base: +x direction leftwards. +z up
        # pandar:     +x direction backwards. +z up <------- this is for QT64 but not XT32
        # ros2 run icp_odometry get_tf.py base pandar
        B_r_BL: [0.000000000, 0.000000000, 0.050400000]
        B_q_BL: [0.000000000, 0.000000000, 1.000000000, 0.000000000]

        model:  "HESAI_QT64"
        topic: "/hesai/pandar"
        rate: 10.
        raw: false
        timeshift: 0.

      cam0: # left
        C_r_CL: [3.388762063794015e-05, -0.07994358595369325, -0.05600121569499821]
        C_q_CL: [0.005222551021921984, 0.7078744176660065, -0.7063115244548896, 0.0032502610734581453]

        image_width: 1440
        image_height: 1080

        topic: "/needed_for_vilens" # need to move topics inside of config block

        rect: # from raw image pipeline
          topic: "/alphasense_driver_ros/cam0/color_rect/image"
          K: [567.8402652659755, 0.0, 717.7200795335658, 0.0, 567.3732323197713, 546.1671180474561, 0.0, 0.0, 1.0]
          D: [0.0, 0.0, 0.0, 0.0]

        fisheye: # from calib_cam0.yaml
          topic: "/alphasense_driver_ros/cam0/color/image"
          K: [697.4908124760002, 0.0, 719.1718975625936, 0.0, 696.9171455329763, 543.7401536075661, 0.0, 0.0, 1.0]
          D: [-0.04417827343575797, 0.006234275291082348, -0.0028153029005502637, -0.0005652124301059104]

      cam1: # front
        C_r_CL: [0.00035060884033447846, -0.079574053851818, -0.053826061545697405]
        C_q_CL: [0.5034725628949727, 0.5003337192107279, -0.4947539264483171, 0.5013981452864594]

        image_width: 1440
        image_height: 1080

        rect: # from raw image pipeline
          topic: "/alphasense_driver_ros/cam1/color_rect/image"
          K: [567.1327295190782, 0.0, 700.119268458472, 0.0, 567.4134238587335, 573.8848164092475, 0.0, 0.0, 1.0] 
          D: [0.0, 0.0, 0.0, 0.0]

        fisheye: # from calib_cam1.yaml
          topic: "/alphasense_driver_ros/cam1/color/image"
          K: [698.1692094914263, 0.0, 712.7646767255006, 0.0, 698.5147584873237, 560.5751284820508, 0.0, 0.0, 1.0]
          D: [-0.04114225009462773, -0.002421765984053725, 0.003400355152679783, -0.0018518822347983275]

        # ros2 run icp_odometry get_tf.py cam1_optical_frame_flipped alphasense_imu
        C_r_CI: [-0.006000000, -0.003000000, -0.070280000]
        C_q_CI: [-0.000000000, -0.707106781, 0.707106781, -0.000000000]

      cam2: # right
        C_r_CL: [-0.0006070783260079121, -0.07992015242752262, -0.054798558347406996]
        C_q_CL: [0.7066174394729171, -0.001174547005383393, 0.0015977924498378243, 0.7075930057111628]

        image_width: 1440
        image_height: 1080

        rect: # from raw image pipeline
          topic: "/alphasense_driver_ros/cam2/color_rect/image"
          K: [564.465076191871, 0.0, 688.7730835762122, 0.0, 565.2206224453041, 529.724903516441, 0.0, 0.0, 1.0]
          D: [0.0, 0.0, 0.0, 0.0]

        fisheye: # calib_cam2.yaml
          topic: "/alphasense_driver_ros/cam2/color/image"
          K: [698.4588137038655, 0.0, 708.6474762128631, 0.0, 699.3937128891818, 533.7390355049014, 0.0, 0.0, 1.0]
          D: [-0.042476719963857094, -0.00421520261588724, 0.006942403828737165, -0.0034076218162515594]

